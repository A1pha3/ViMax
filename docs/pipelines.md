# 核心功能流水线

ViMax 提供了三条核心流水线，分别应对不同的创作需求。

## 1. Idea2Video (创意到视频)

适用于从一个简单的点子或短文本快速生成视频。

### 适用场景
- 快速验证创意
- 制作短视频、预告片
- 社交媒体内容创作

### 工作流程
1.  **创意扩写**: LLM 将用户的一句话创意扩写为完整的短剧本。
2.  **分镜设计**: 自动规划分镜、镜头角度和画面描述。
3.  **图像生成**: 生成每个分镜的关键帧。
4.  **视频生成**: 基于关键帧生成动态视频。

### 使用方法
配置 `configs/idea2video.yaml` 后，运行 `main_idea2video.py`。

```python
# main_idea2video.py
idea = "一个机器人在森林中发现了一朵发光的花"
style = "Cyberpunk"
```

## 2. Script2Video (剧本到视频)

适用于已有成熟剧本，需要将其视觉化的场景。

### 适用场景
- 影视从业者进行预演 (Pre-visualization)
- 广告片制作
- 动画短片制作

### 剧本格式
支持标准剧本格式，包含场景标题（Slugline）、动作描述（Action）和对话（Dialogue）。

```text
EXT. PARK - DAY
John sits on a bench, feeding pigeons.
```

### 使用方法
配置 `configs/script2video.yaml` 后，运行 `main_script2video.py`。

## 3. Novel2Video (小说到视频)

> [!WARNING]
> **实验性功能**: 该流水线目前处于开发阶段 (`TODO: NOT IMPLEMENTED YET`)，可能包含未完成的功能或不稳定特性。

**（实验性功能）** 适用于将长篇小说改编为系列视频。

### 核心特性
- **长文本处理**: 自动压缩和摘要长篇小说。
- **事件驱动**: 基于事件（Event）而非简单的文本切分来组织视频结构。
- **角色一致性**: 具备跨越多个场景和事件的角色外观保持能力。

### 工作流程详解
1.  **文本压缩**: 将小说切分为块并压缩，保留核心信息。
2.  **事件提取**: 从压缩文本中提取关键事件链。
3.  **知识检索**: 为每个事件回溯原始小说中的细节描写（RAG）。
4.  **场景生成**: 将事件转化为具体的场景脚本。
5.  **角色画像**: 生成所有角色的标准画像，并在不同场景中根据动态特征（如受伤、换装）进行调整。
6.  **视频合成**: 调用 Script2Video 流水线逐个场景生成视频。

### 注意事项
- 该功能计算量较大，消耗 Token 较多。
- 需要配置向量数据库（默认使用本地 FAISS）和 Rerank 模型。
